(()=>{"use strict";const t=class{constructor(t=0,i=0,s=100,h=100,e="#f00"){this.x=t,this.y=i,this.width=s,this.height=h,this.color=e}render(t){t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle=this.color,t.fill(),t.closePath()}},i=class extends t{constructor(t=0,i=0,s=10,h="#0095DD"){super(t,i,0,0,h),this.radius=s,this.dx=2,this.dy=-2}move(){this.x+=this.dx,this.y+=this.dy}render(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle=this.color,t.fill(),t.closePath()}},s=class extends t{constructor(t,i,s=75,h=20,e=1,l="#0095DD"){super(t,i,s,h,l),this.points=e,this.status=1}};function h(){return Math.floor(256*Math.random())}const e=class extends t{constructor(t,i,s=75,h=10,e="#0095DD"){super(t,i,s,h,e),this.dx=7}moveRight(t){this.x=Math.min(this.x+this.dx,t-this.width)}moveLeft(){this.x=Math.max(this.x-this.dx,0)}},l=class extends t{constructor(t,i,s,h,e=0,l="16px Arial"){super(i,s,0,0,h),this.text=t,this.value=e,this.font=l}render(t){t.font=this.font,t.fillStyle=this.color,t.fillText(`${this.text} ${this.value}`,this.x,this.y)}};new class{constructor(t){this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.ball=new i(this.canvas.width/2,this.canvas.height-30,10,"#0095DD"),this.paddle=new e((this.canvas.width-75)/2,this.canvas.height-10,75,10,"#0095DD"),this.allBricks=new class{constructor(){this.bricks=[],this.brickWidth=50,this.brickHeight=20,this.brickPadding=10,this.brickOffsetTop=30,this.brickOffsetLeft=30,this.brickRowCount=4,this.brickColumnCount=7,this.activeBricks=0,this.createBricks()}createBricks(){const t=[];for(let i=0;i<this.brickColumnCount;i+=1){this.bricks[i]=[];for(let e=0;e<this.brickRowCount;e+=1)t[e]=void 0===t[e]?`rgb(${h()},${h()},${h()})`:t[e],this.bricks[i][e]=new s(0,0,this.brickWidth,this.brickHeight,this.brickRowCount-e,t[e]),this.activeBricks+=1}}render(t){for(let i=0;i<this.brickColumnCount;i+=1)for(let s=0;s<this.brickRowCount;s+=1)if(1===this.bricks[i][s].status){let h=i*(this.brickWidth+this.brickPadding)+this.brickOffsetLeft;h=s%2==0?h:h+this.brickWidth/4;const e=s*(this.brickHeight+this.brickPadding)+this.brickOffsetTop;this.bricks[i][s].x=h,this.bricks[i][s].y=e,this.bricks[i][s].render(t)}}},this.scoreLabel=new l("Score: ",8,20,"#0095DD"),this.livesLabel=new l("Lives: ",this.canvas.width-65,20,"#0095DD",3),this.rightPressed=!1,this.leftPressed=!1,this.setup(),this.draw()}setup(){document.addEventListener("keydown",(t=>this.keyDownHandler(t)),!1),document.addEventListener("keyup",(t=>this.keyUpHandler(t)),!1),document.addEventListener("mousemove",(t=>this.mouseMoveHandler(t)),!1)}collisionsWithBricks(){for(let t=0;t<this.allBricks.brickColumnCount;t+=1)for(let i=0;i<this.allBricks.brickRowCount;i+=1){const s=this.allBricks.bricks[t][i];1===s.status&&this.ball.x>s.x&&this.ball.x<s.x+this.allBricks.brickWidth&&this.ball.y>s.y&&this.ball.y<s.y+this.allBricks.brickHeight&&(this.ball.dy=-this.ball.dy,s.status=0,this.allBricks.activeBricks-=1,this.ball.color=s.color,this.scoreLabel.value+=s.points,0===this.allBricks.activeBricks&&(alert(`YOU WIN, CONGRATULATIONS! Your score is ${this.scoreLabel.value}`),document.location.reload()))}}collisionsWithCanvasAndPaddle(){(this.ball.x+this.ball.dx>this.canvas.width-this.ball.radius||this.ball.x+this.ball.dx<this.ball.radius)&&(this.ball.dx=-this.ball.dx),this.ball.y+this.ball.dy<this.ball.radius?this.ball.dy=-this.ball.dy:this.ball.y+this.ball.dy>this.canvas.height-this.ball.radius&&(this.ball.x>this.paddle.x&&this.ball.x<this.paddle.x+this.paddle.width?this.ball.dy=-this.ball.dy-.5:this.ball.y+this.ball.dy>=this.canvas.height&&(this.livesLabel.value-=1,this.livesLabel.value<1?(alert(`GAME OVER! Your score is ${this.scoreLabel.value}`),document.location.reload()):(this.ball.x=this.canvas.width/2,this.ball.y=this.canvas.height-30,this.ball.dx=2,this.ball.dy=-2,this.paddle.x=(this.canvas.width-this.paddle.width)/2)))}movePaddle(){this.rightPressed?this.paddle.moveRight(this.canvas.width):this.leftPressed&&this.paddle.moveLeft()}drawBackground(){const t=this.ctx.createRadialGradient(this.canvas.width/2,this.canvas.height/4*3,0,this.canvas.width/2,this.canvas.height/4*3,this.canvas.width/16);t.addColorStop(0,this.ball.color),t.addColorStop(.2,"white"),t.addColorStop(.4,this.ball.color),t.addColorStop(.6,"white"),t.addColorStop(.8,this.ball.color),t.addColorStop(1,"#f1f1f1"),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}mouseMoveHandler(t){const i=t.clientX-this.canvas.offsetLeft;i>this.paddle.width/2&&i<this.canvas.width-this.paddle.width/2&&(this.paddle.x=i-this.paddle.width/2)}keyDownHandler(t){"Right"===t.key||"ArrowRight"===t.key||"d"===t.key?this.rightPressed=!0:"Left"!==t.key&&"ArrowLeft"!==t.key&&"a"!==t.key||(this.leftPressed=!0)}keyUpHandler(t){"Right"===t.key||"ArrowRight"===t.key||"d"===t.key?this.rightPressed=!1:"Left"!==t.key&&"ArrowLeft"!==t.key&&"a"!==t.key||(this.leftPressed=!1)}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawBackground(),this.ball.render(this.ctx),this.ball.move(),this.paddle.render(this.ctx),this.movePaddle(),this.collisionsWithBricks(),this.collisionsWithCanvasAndPaddle(),this.allBricks.render(this.ctx),this.scoreLabel.render(this.ctx),this.livesLabel.render(this.ctx),requestAnimationFrame((()=>this.draw()))}}("myCanvas")})();